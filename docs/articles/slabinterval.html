<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Slab + interval stats and geoms • tidybayes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Slab + interval stats and geoms">
<meta property="og:description" content="tidybayes">
<meta property="og:image" content="http://mjskay.github.io/tidybayes/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-93322-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93322-5');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidybayes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tidybayes.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/freq-uncertainty-vis.html">Frequentist uncertainty visualization</a>
    </li>
    <li>
      <a href="../articles/slabinterval.html">Slab + interval stats and geoms</a>
    </li>
    <li>
      <a href="../articles/tidy-brms.html">Extracting and visualizing tidy draws from brms models</a>
    </li>
    <li>
      <a href="../articles/tidy-rstanarm.html">Extracting and visualizing tidy draws from rstanarm models</a>
    </li>
    <li>
      <a href="../articles/tidybayes-residuals.html">Extracting and visualizing tidy residuals from Bayesian models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mjskay/tidybayes/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Slab + interval stats and geoms</h1>
                        <h4 class="author">Matthew Kay</h4>
            
            <h4 class="date">2020-04-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mjskay/tidybayes/blob/master/vignettes/slabinterval.Rmd"><code>vignettes/slabinterval.Rmd</code></a></small>
      <div class="hidden name"><code>slabinterval.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.kable-table table {
  margin-left: 0;
}
img {
  border: none;
}
</style>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This vignette describes the slab+interval geoms and stats in <code>tidybayes</code>. This is a flexible family of stats and geoms designed to make plotting distributions (such as priors and posteriors in Bayesian models, or even sampling distributions from other models) straightforward, and support a range of useful plots, including intervals, eye plots (densities + intervals), CCDF bar plots (complementary cumulative distribution functions + intervals), gradient plots, and histograms.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>The following libraries are required to run this vignette:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r">library(dplyr)
library(tidyr)
library(tidybayes)
library(ggplot2)
library(cowplot)
library(brms)
library(ggstance)

theme_set(theme_tidybayes())</pre></body></html></div>
</div>
<div id="roadmap-it-all-starts-with-slabinterval" class="section level2">
<h2 class="hasAnchor">
<a href="#roadmap-it-all-starts-with-slabinterval" class="anchor"></a>Roadmap: It all starts with “slabinterval”</h2>
<p><img src="slabinterval_files/figure-html/slabinterval_family-1.png" width="672"></p>
<p>Tidybayes has a pantheon of geoms and stats that stem from a common root: <code><a href="../reference/geom_slabinterval.html">geom_slabinterval()</a></code> and <code><a href="../reference/stat_slabinterval.html">stat_slabinterval()</a></code>. These geoms consist of a “slab” (say, a density or a CDF), one or more intervals, and a point summary. These components may be computed in a number of different ways, and different variants of the geom will or will not include all components.</p>
<p>Using <code><a href="../reference/geom_slabinterval.html">geom_slabinterval()</a></code> and <code><a href="../reference/stat_slabinterval.html">stat_slabinterval()</a></code> directly is not necessarily advisable: they are highly configurable on their own, but this configurability requires remembering a bunch of combinations of options to use. Instead, tidybayes contains a number of pre-configured, easier-to-remember stats and geoms built on top of the slabinterval. These follow the following naming scheme:</p>
<p><code>[geom|stat|stat_dist]_[name][h|]</code></p>
<p>For example, <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_eye()</a></code>, <code>stat_dist_eyeh</code>, <code>stat_eyeh</code>, <code>stat_pointinterval</code>, <code>geom_pointinterval</code>, etc. The naming scheme works as follows:</p>
<ul>
<li>Geoms starting with <code>geom_</code> are meant to be used on already-summarized data (typically data summarized into intervals): things like <code><a href="../reference/geom_pointinterval.html">geom_pointinterval()</a></code> and <code><a href="../reference/geom_interval.html">geom_interval()</a></code>.</li>
<li>Stats starting with <code>stat_</code> are meant to be used on sample data; e.g. draws from a posterior distribution (or any other distribution, really). These stats compute relevant summaries (densities, CDFs, points, and/or intervals) before forwarding the summaries to their geom. Some have geom counterparts (e.g. <code><a href="../reference/stat_interval.html">stat_interval()</a></code> corresponds to <code><a href="../reference/geom_interval.html">geom_interval()</a></code>, except the former applies to sample data and the latter to already-summarized data). Many of these stats do not currently have geom counterparts (e.g. <code>stat_ccdfinterval</code>), as they are primarily differentiated based on what kind of statistical summary they compute. If you’ve already computed a function (such as a density or CDF), you can just use <code><a href="../reference/geom_slabinterval.html">geom_slabinterval()</a></code> directly.</li>
<li>Stats starting with <code>stat_dist</code> can be used to create slab+interval geoms for analytical distributions. They take distribution names (the <code>dist</code> aesthetic) and arguments (the <code>args</code> aesthetic or <code>arg1</code>, … <code>arg9</code> aesthetics) and compute the relevant slabs and intervals. Thus, where <code>stat_eye</code> makes an eye plot for sample data, <code>stat_dist_eye</code> makes an eye plot for an analytical distribution.</li>
</ul>
<p>We’ll start with one of the most common existing use cases for these kinds geoms: eye plots.</p>
</div>
<div id="eye-plots-and-half-eye-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#eye-plots-and-half-eye-plots" class="anchor"></a>Eye plots and half-eye plots</h2>
<div id="on-sample-data-stat_halfeyeh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-sample-data-stat_halfeyeh" class="anchor"></a>On sample data: <code>stat_[half]eye[h]</code>
</h3>
<p>Eye plots combine densities (as violins) with intervals to give a more detailed picture of uncertainty than is available just by looking at intervals.</p>
<p>For these first few demos we’ll use these data:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r">set.seed(1234)
df = tribble(
    ~group, ~subgroup, ~value,
    "a",          "h", rnorm(1000, mean = 5),
    "b",          "h", rnorm(1000, mean = 7, sd = 1.5),
    "c",          "h", rnorm(1000, mean = 8),
    "c",          "i", rnorm(1000, mean = 9),
    "c",          "j", rnorm(1000, mean = 7)
  ) %&gt;%
  unnest(value)</pre></body></html></div>
<p>We can summarize it at the group level using an eye plot with <code><a href="../reference/stat_sample_slabinterval.html">stat_eye()</a></code> (ignoring subgroups for now):</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value)) +
  stat_eye() +
  ggtitle("stat_eye()")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/group_eye-1.png" width="432"></p>
<p>(Users of older versions of tidybayes might have used <code><a href="../reference/geom_eye.html">geom_eye()</a></code>, which is the older spelling of <code><a href="../reference/stat_sample_slabinterval.html">stat_eye()</a></code>. Due to the name standardization in this version of tidybayes (see the description above), <code><a href="../reference/stat_sample_slabinterval.html">stat_eye()</a></code> is now the preferred spelling, though <code><a href="../reference/geom_eye.html">geom_eye()</a></code> will continue to work.)</p>
<p>We can also use <code>stat_halfeye</code> instead to just get densities:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value)) +
  stat_halfeye() +
  ggtitle("stat_halfeye()")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/group_halfeye-1.png" width="432"></p>
<p>Or use the <code>side</code> parameter to more finely control where the slab (in this case, the density) is drawn:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r">p = df %&gt;%
  ggplot(aes(x = group, y = value)) +
  panel_border()

plot_grid(ncol = 3, align = "hv",
  p + stat_eye(side = "left") + labs(title = "stat_eye()", subtitle = "side = 'left'"),
  p + stat_eye(side = "both") + labs(subtitle = "side = 'both'"),
  p + stat_eye(side = "right")  + labs(subtitle = "side = 'right'")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/eye_side-1.png" width="648"></p>
<p>Or show a horizontal version by appending <code>h</code> to <code><a href="../reference/stat_sample_slabinterval.html">stat_halfeye()</a></code> to get <code><a href="../reference/stat_sample_slabinterval.html">stat_halfeyeh()</a></code>:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = value, y = group)) +
  stat_halfeyeh() +
  ggtitle("stat_halfeyeh()")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/halfeyeh-1.png" width="432"></p>
<p><code><a href="../reference/stat_sample_slabinterval.html">stat_halfeyeh()</a></code> is equivalent to <code><a href="../reference/stat_sample_slabinterval.html">stat_halfeye(orientation = 'horizontal')</a></code>.</p>
<p>Yielding these combinations:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">p = df %&gt;%
  ggplot(aes(x = group, y = value)) +
  panel_border()

ph = df %&gt;%
  ggplot(aes(y = group, x = value)) +
  panel_border()

plot_grid(ncol = 2, align = "hv",
  p + stat_eye() + labs(title = "stat_[half]eye[h]", subtitle = "stat_eye()"),
  p + stat_halfeye() + labs(subtitle = "stat_halfeye()"),
  ph + stat_eyeh() + labs(subtitle = "stat_eyeh()"),
  ph + stat_halfeyeh()  + labs(subtitle = "stat_halfeyeh()")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/halfeyeh_family-1.png" width="648"></p>
<p>The <code>side</code> parameter works for <code><a href="../reference/stat_sample_slabinterval.html">stat_halfeye()</a></code> as well. <code>"top"</code> and <code>"right"</code> are considered synonyms, as are <code>"bottom"</code> and <code>"left"</code>; either form works with both horizontal and vertical versions of the geoms:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r">p = df %&gt;%
  ggplot(aes(x = value, y = group)) +
  panel_border()

plot_grid(ncol = 3, align = "hv", 
  # side = "left" would give the same result
  p + stat_eyeh(side = "left") + ggtitle("stat_eyeh()") + labs(subtitle = "side = 'bottom'"),
  p + stat_eyeh(side = "both") + labs(subtitle = "side = 'both'"),
  # side = "right" would give the same result
  p + stat_eyeh(side = "right") + labs(subtitle = "side = 'top'")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/eyeh_side-1.png" width="648"></p>
<p>Eye plots are also designed to support dodging through the standard mechanism of <code>position = "dodge"</code>. Unlike with geom_violin(), densities in groups that are not dodged (here, ‘a’ and ‘b’) have the same area and max width as those in groups that are dodged (‘c’):</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_eye(position = "dodge") +
  ggtitle("stat_eye(position = 'dodge')")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/eye_dodge-1.png" width="648"></p>
</div>
<div id="on-analytical-distributions-stat_dist_halfeyeh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-analytical-distributions-stat_dist_halfeyeh" class="anchor"></a>On analytical distributions: <code>stat_dist_[half]eye[h]</code>
</h3>
<p>The same set of (half-)eye plot stats designed for sample data described above all have corresponding stats for analytical distributions: simply use <code>stat_dist_</code> instead of <code>stat_</code> in the name. These stats use the following aesthetics to produce plots of distributions:</p>
<ul>
<li>
<code>dist</code>: the name of the distribution, following R’s naming scheme. This is a string which should have <code>"p"</code>, <code>"q"</code>, and <code>"d"</code> functions defined for it: e.g., “norm” is a valid distribution name because the <code><a href="https://rdrr.io/r/stats/Normal.html">pnorm()</a></code>, <code><a href="https://rdrr.io/r/stats/Normal.html">qnorm()</a></code>, and <code><a href="https://rdrr.io/r/stats/Normal.html">dnorm()</a></code> functions define the CDF, quantile function, and density function of the Normal distribution.</li>
<li>
<code>args</code> or <code>arg1</code>, … <code>arg9</code>: arguments for the distribution. If you use <code>args</code>, it should be a list column where each element is a list containing arguments for the distribution functions; alternatively, you can pass the arguments directly using <code>arg1</code>, … <code>arg9</code>.</li>
</ul>
<p>For example, here are a variety of normal distributions describing the same data from the previous example:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r">dist_df = tribble(
    ~group, ~subgroup, ~mean, ~sd,
    "a",          "h",     5,   1,
    "b",          "h",     7,   1.5,
    "c",          "h",     8,   1,
    "c",          "i",     9,   1,
    "c",          "j",     7,   1
)</pre></body></html></div>
<p>We can visualize these distributions directly using <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_eye()</a></code>:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r">dist_df %&gt;%
  ggplot(aes(x = group, dist = "norm", arg1 = mean, arg2 = sd, fill = subgroup)) +
  stat_dist_eye(position = "dodge") +
  ggtitle("stat_dist_eye(position = 'dodge')")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dist_eye_dodge-1.png" width="648"></p>
<p>This makes it easy to visualize a variety of distributions. E.g., here are some Beta distributions:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r">data.frame(alpha = seq(5, 100, length.out = 10)) %&gt;%
  ggplot(aes(y = alpha, dist = "beta", arg1 = alpha, arg2 = 10)) +
  stat_dist_halfeyeh() +
  labs(
    title = "stat_dist_halfeyeh()",
    x = "Beta(alpha,10) distribution"
  )</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/beta_stacked-1.png" width="648"></p>
<p>If you want to plot all of these on top of each other (instead of stacked), you could turn off plotting of the interval to make the plot easier to read using <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_halfeyeh(show_interval = FALSE, ...)</a></code>. A shortcut for <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_halfeyeh(show_interval = FALSE, ...)</a></code> is <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_slabh()</a></code>. We’ll also turn off the fill color with <code>fill = NA</code> to make the stacking easier to see, and use outline <code>color</code> to show the value of <code>alpha</code>:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r">data.frame(alpha = seq(5, 100, length.out = 10)) %&gt;%
  ggplot(aes(y = "", dist = "beta", arg1 = alpha, arg2 = 10, color = alpha)) +
  stat_dist_slabh(fill = NA) +
  coord_cartesian(expand = FALSE) +
  scale_color_viridis_c() +
  labs(
    title = "stat_dist_slabh(fill = NA)",
    x = "Beta(alpha,10) distribution",
    y = NULL
  )</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/beta_overplotted_slabh-1.png" width="648"></p>
<p>The approach using <code>arg1</code>, … <code>arg9</code> can work well when comparing similar distributions, but is harder to use with different distribution types. For example, if we wished to compare a Student t distribution and Normal distribution, the arguments may not line up. This is a good case to use list columns and the <code>args</code> aesthetic. We’ll use it along with the <code>brms</code> package’s implementation of the scaled and shifted Student t distribution (<code><a href="https://rdrr.io/pkg/brms/man/StudentT.html">brms::dstudent_t()</a></code>, etc):</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r">tribble(
  ~ dist,      ~ args,
  "norm",      list(0, 1),
  "student_t", list(3, 0, 1)
) %&gt;%
  ggplot(aes(y = dist, dist = dist, args = args)) +
  stat_dist_halfeyeh() +
  ggtitle("stat_dist_halfeyeh()")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/norm_vs_t-1.png" width="432"></p>
<p>A particularly good use of the <code>dist</code> stats is to visualize priors. For example, with <code>brms</code> you can specify priors using the <code><a href="https://rdrr.io/pkg/brms/man/set_prior.html">brms::prior()</a></code> function. E.g., I might set some priors on the betas and the standard deviation in a model:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"># NB these priors are made up!
c(
  prior(normal(0,1), class = b),
  prior(lognormal(0,1), class = sigma)
)</pre></body></html></div>
<pre><code>##             prior class coef group resp dpar nlpar bound
## 1    normal(0, 1)     b                                 
## 2 lognormal(0, 1) sigma</code></pre>
<p>The <code>parse_dist</code> function can make it easier to visualize these: it takes in string specifications like those produced by <code>brms</code> — <code>"normal(0,1)"</code> and <code>"lognormal(0,1)"</code> above — and translates them into <code>.dist</code> and <code>.args</code> columns:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r">c(
  prior(normal(0,1), class = b),
  prior(lognormal(0,1), class = sigma)
) %&gt;%
  parse_dist(prior)</pre></body></html></div>
<pre><code>##             prior class coef group resp dpar nlpar bound .dist .args
## 1    normal(0, 1)     b                                   norm  0, 1
## 2 lognormal(0, 1) sigma                                  lnorm  0, 1</code></pre>
<p>Notice that it also automatically translate some common distribution names (e.g. “normal” and “lognormal”) into their equivalent R function names (<code>"norm"</code> and <code>"lnorm"</code>). This makes it easy to use them with <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_eye()</a></code> and its variants:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r">c(
  prior(normal(0,1), class = b),
  prior(lognormal(0,1), class = sigma)
) %&gt;%
  parse_dist(prior) %&gt;%
  ggplot(aes(y = class, dist = .dist, args = .args)) +
  stat_dist_halfeyeh() +
  labs(
    title = "stat_dist_halfeyeh()",
    subtitle = "with brms::prior() and tidybayes::parse_dist() to visualize priors",
    x = NULL
  )</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/prior_dist_halfeyeh-1.png" width="648"></p>
<p>The <code>stat_dist_...</code> family also adjusts densities appropriately when scale transformations are applied. For example, here is a log-Normal distribution plotted on a log scale:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r">data.frame(dist = "lnorm") %&gt;% ggplot(aes(y = 1, dist = dist, arg1 = log(10), arg2 = 2*log(10))) +
  stat_dist_halfeyeh() +
  scale_x_log10(breaks = 10^seq(-5,7, by = 2))</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dist_halfeyeh_log_scale-1.png" width="432"></p>
<p>As expected, a log-Normal density plotted on the log scale appears Normal. The Jacobian for the scale transformation is applied to the density so that the correct density is shown on the log scale. Internally, numerical differentiation is used to calculate the Jacobian so that the <code>stat_dist_...</code> family works generically across the different scale transformations supported by ggplot.</p>
</div>
<div id="summing-up-eye-plots-stat_dist_halfeyeh" class="section level3">
<h3 class="hasAnchor">
<a href="#summing-up-eye-plots-stat_dist_halfeyeh" class="anchor"></a>Summing up eye plots: <code>stat_[dist_][half]eye[h]</code>
</h3>
<p>All of the above geoms follow the naming scheme <code>stat_[dist_][half]eye[h]</code>.</p>
<ul>
<li>Add <code>dist_</code> to the name to get stats for analytical distributions (otherwise it is for sample data).</li>
<li>Add <code>half</code> to the name to get half-eyes (densities) instead of eyes (violins).</li>
<li>Add <code>h</code> to the name to get the horizontal version.</li>
</ul>
</div>
</div>
<div id="histogram-interval-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#histogram-interval-plots" class="anchor"></a>Histogram + interval plots</h2>
<p>In some cases you might prefer histograms to density plots. <code>stat_histinterval[h]</code> provides an alternative to <code>stat_halfeye[h]</code> that uses histograms instead of densities:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r">p = df %&gt;%
  ggplot(aes(x = group, y = value)) +
  panel_border()

ph = df %&gt;%
  ggplot(aes(y = group, x = value)) +
  panel_border()

plot_grid(ncol = 2, align = "hv",
  p + stat_histinterval() + labs(title = "stat_histinterval[h]", subtitle = "stat_histinterval()"),
  ph + stat_histintervalh() + labs(subtitle = "stat_histintervalh()")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/stat_histintervalh-1.png" width="648"></p>
<p>You can use the <code>slab_color</code> aesthetic to show the outline of the bars. By default the outlines are only drawn on top of the bars, as typical tasks with histograms involve area estimation, so the outlines between bars are not strictly necessary and may be distracting. However, if you wish to include those outlines, you can set <code>outline_bars = TRUE</code>:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r">plot_grid(ncol = 2, align = "hv",
  ph + stat_histintervalh(slab_color = "gray45", outline_bars = FALSE) +
    labs(title = "stat_histintervalh", subtitle = "outline_bars = FALSE (default)"),
  ph + stat_histintervalh(slab_color = "gray45", outline_bars = TRUE) +
    labs(subtitle = "outline_bars = TRUE")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/stat_histintervalh_outlines-1.png" width="648"></p>
<p>There are currently no analytical (<code>stat_dist_</code>) versions of <code><a href="../reference/stat_sample_slabinterval.html">stat_histinterval()</a></code> / <code><a href="../reference/stat_sample_slabinterval.html">stat_histintervalh()</a></code>.</p>
</div>
<div id="ccdf-bar-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#ccdf-bar-plots" class="anchor"></a>CCDF bar plots</h2>
<p>Another (perhaps sorely underused) technique for visualizing distributions is cumulative distribution functions (CDFs) and complementary CDFs (CCDFs). These <a href="http://www.mjskay.com/papers/chi2018-uncertain-bus-decisions.pdf">can be more effective for some decision-making tasks</a> than densities or intervals, and require fewer assumptions to create from sample data than density plots.</p>
<p>For all of the examples above, both on sample data and analytical distributions, you can replace <code>[half]eye</code> with <code>[c]cdfinterval</code> to get a stat that creates a CDF or CCDF bar plot.</p>
<div id="on-sample-data-stat_ccdfintervalh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-sample-data-stat_ccdfintervalh" class="anchor"></a>On sample data: <code>stat_[c]cdfinterval[h]</code>
</h3>
<p><code>stat_[c]cdfinterval[h]</code> has the following basic combinations:</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r">p = df %&gt;%
  ggplot(aes(x = group, y = value)) +
  panel_border()

ph = df %&gt;%
  ggplot(aes(y = group, x = value)) +
  panel_border()

plot_grid(ncol = 2, align = "hv",
  p + stat_ccdfinterval() + labs(title = "stat_[c]cdfinterval[h]", subtitle = "stat_ccdfinterval()"),
  ph + stat_ccdfintervalh() + labs(subtitle = "stat_ccdfintervalh()"),
  p + stat_cdfinterval() + labs(subtitle = "stat_cdfinterval()"),
  ph + stat_cdfintervalh()  + labs(subtitle = "stat_cdfintervalh()")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/cdfinterval_family-1.png" width="648"></p>
<p>The CCDF interval plots are probably more useful in general, as the bars typical grow up from the baseline. For example, replacing <code><a href="../reference/stat_sample_slabinterval.html">stat_eye()</a></code> with <code><a href="../reference/stat_sample_slabinterval.html">stat_ccdfinterval()</a></code> in our previous subgroup plot produces CCDF bar plots:</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup, group = subgroup)) +
  stat_ccdfinterval(position = "dodge") +
  ggtitle("stat_ccdfinterval(position = 'dodge')") </pre></body></html></div>
<p><img src="slabinterval_files/figure-html/ccdf_barplot-1.png" width="648"></p>
<p>The extents of the bars are determined automatically by range of the data in the samples. However, for bar charts it is often good practice to draw the bars from a meaningful reference point (this point is often 0). You can use <code><a href="https://ggplot2.tidyverse.org/reference/expand_limits.html">ggplot2::expand_limits()</a></code> to ensure the bar is drawn down to 0:</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_ccdfinterval(position = "dodge") +
  expand_limits(y = 0) +
  # plus coord_cartesian so there is no space between bars and axis
  coord_cartesian(expand = FALSE) +
  ggtitle("stat_ccdfinterval(position = 'dodge')")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/ccdf_dodge-1.png" width="648"></p>
<p>You can also adjust the position of the slab relative to the position of the interval using the <code>justification</code> parameter:</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_ccdfinterval(position = "dodge", justification = 1) +
  expand_limits(y = 0) +
  # clip = "off" needed here to ensure interval at the edge is visible
  coord_cartesian(expand = FALSE, clip = "off") +
  ggtitle("stat_ccdfinterval(position = 'dodge', justification = 1)")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/ccdf_justification-1.png" width="648"></p>
<p>The <code>side</code> parameter also works as with <code><a href="../reference/stat_sample_slabinterval.html">stat_eye()</a></code>. Here we’ll demonstrate with <code><a href="../reference/stat_sample_slabinterval.html">stat_ccdfintervalh()</a></code>, the horizontal version:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r">p = df %&gt;%
  ggplot(aes(x = value, y = group)) +
  expand_limits(x = 0) +
  panel_border()

plot_grid(ncol = 3, align = "hv", 
  # side = "left" would give the same result
  p + stat_ccdfintervalh(side = "bottom") + ggtitle("stat_ccdfintervalh()") + labs(subtitle = "side = 'bottom'"),
  p + stat_ccdfintervalh(side = "both") + labs(subtitle = "side = 'both'"),
  # side = "right" would give the same result
  p + stat_ccdfintervalh(side = "top") + labs(subtitle = "side = 'top'")
)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/ccdf_side-1.png" width="648"></p>
</div>
<div id="on-analytical-distributions-stat_dist_ccdfintervalh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-analytical-distributions-stat_dist_ccdfintervalh" class="anchor"></a>On analytical distributions: <code>stat_dist_[c]cdfinterval[h]</code>
</h3>
<p>You can also use <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_ccdfinterval()</a></code> instead if you wish to visualize analytical distributions, just as you can use <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_eye()</a></code>.</p>
<p>By default, <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_ccdfinterval()</a></code> uses the quantiles at <code>p = 0.001</code> and <code>p = 0.999</code> in the distributions are used to determine their extent. You can change this setting using the <code>p_limits</code> parameter, or use <code>expand_limits()</code> to ensure a particular value is shown as before:</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r">dist_df %&gt;%
  ggplot(aes(x = group, dist = "norm", arg1 = mean, arg2 = sd, fill = subgroup)) +
  stat_dist_ccdfinterval(position = "dodge") +
  expand_limits(y = 0) +
  ggtitle("stat_dist_ccdfinterval(position = 'dodge')") +
  coord_cartesian(expand = FALSE)</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dist_ccdf_dodge-1.png" width="648"></p>
</div>
<div id="summing-up-cdf-bar-plots-stat_dist_ccdfintervalh" class="section level3">
<h3 class="hasAnchor">
<a href="#summing-up-cdf-bar-plots-stat_dist_ccdfintervalh" class="anchor"></a>Summing up CDF bar plots: <code>stat_[dist_][c]cdfinterval[h]</code>
</h3>
<p>All of the above geoms follow the naming scheme <code>stat_[dist_][c]cdfinterval[h]</code>.</p>
<ul>
<li>Add <code>dist_</code> to the name to get stats for analytical distributions (otherwise it is for sample data).</li>
<li>Add <code>c</code> to the name to get CCDFs instead of CDFs.</li>
<li>Add <code>h</code> to the name to get the horizontal version.</li>
</ul>
</div>
</div>
<div id="gradient-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#gradient-plots" class="anchor"></a>Gradient plots</h2>
<p>An alternative approach to mapping density onto the <code>thickness</code> aesthetic of the slab is to instead map it onto its <code>alpha</code> value (i.e., opacity). This is what the <code>stat_[dist_]gradientinterval[h]</code> family does (actually, it uses <code>slab_alpha</code>, a variant of the <code>alpha</code> aesthetic).</p>
<div id="on-sample-data-stat_gradientintervalh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-sample-data-stat_gradientintervalh" class="anchor"></a>On sample data: <code>stat_gradientinterval[h]</code>
</h3>
<p>For example, replacing <code><a href="../reference/stat_sample_slabinterval.html">stat_eye()</a></code> with <code><a href="../reference/stat_sample_slabinterval.html">stat_gradientinterval()</a></code> produces gradient + interval plots:</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_gradientinterval(position = "dodge") +
  labs(title = "stat_gradientinterval(position = 'dodge')")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/gradient_dodge-1.png" width="648"></p>
<p><code><a href="../reference/stat_sample_slabinterval.html">stat_gradientinterval()</a></code> maps density onto the <code>slab_alpha</code> aesthetic, which is a variant of the ggplot <code>alpha</code> scale that specifically targets alpha (opacity) values of the slab portion of <code><a href="../reference/geom_slabinterval.html">geom_slabinterval()</a></code>. This aesthetic has default ranges and limits that are a little different from the base ggplot <code>alpha</code> scale and which ensure that densities of 0 are mapped onto opacities of 0. You can use <code><a href="../reference/scales.html">scale_slab_alpha_continuous()</a></code> to adjust this scale’s settings.</p>
</div>
<div id="on-analytical-distributions-stat_dist_ccdfintervalh-1" class="section level3">
<h3 class="hasAnchor">
<a href="#on-analytical-distributions-stat_dist_ccdfintervalh-1" class="anchor"></a>On analytical distributions: <code>stat_dist_[c]cdfinterval[h]</code>
</h3>
<p>As with other plot types, you can also use <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_gradientinterval()</a></code> instead if you wish to visualize analytical distributions:</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r">dist_df %&gt;%
  ggplot(aes(x = group, dist = "norm", arg1 = mean, arg2 = sd, fill = subgroup)) +
  stat_dist_gradientinterval(position = "dodge") +
  labs(title = "stat_dist_gradientinterval(position = 'dodge')")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dist_gradient_dodge-1.png" width="648"></p>
</div>
<div id="summing-up-gradient-plots-stat_dist_gradientintervalh" class="section level3">
<h3 class="hasAnchor">
<a href="#summing-up-gradient-plots-stat_dist_gradientintervalh" class="anchor"></a>Summing up gradient plots: <code>stat_[dist_]gradientinterval[h]</code>
</h3>
<p>All of the above geoms follow the naming scheme <code>stat_[dist_]gradientinterval[h]</code>.</p>
<ul>
<li>Add <code>dist_</code> to the name to get stats for analytical distributions (otherwise it is for sample data).</li>
<li>Add <code>h</code> to the name to get the horizontal version.</li>
</ul>
</div>
</div>
<div id="dotplots" class="section level2">
<h2 class="hasAnchor">
<a href="#dotplots" class="anchor"></a>Dotplots</h2>
<p>The encodings thus far are <em>continuous</em> probability encodings: they map probabilities or probability densities onto aesthetics like x/y position or transparency. An alternative is <em>discrete</em> or <em>frequency-framing</em> uncertainty visualizations, such as <em>dotplots</em> and <em>quantile dotplots</em>. These represent distributions as number of discrete possible outcomes.</p>
<div id="on-sample-data-stat_dotsh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-sample-data-stat_dotsh" class="anchor"></a>On sample data: <code>stat_dots[h]</code>
</h3>
<p>For example, replacing <code><a href="../reference/stat_sample_slabinterval.html">stat_halfeye()</a></code> with <code><a href="../reference/geom_dotsinterval.html">stat_dots()</a></code> produces dotplots:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_dots(position = "dodge") +
  labs(title = "stat_dots(position = 'dodge')")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dots_dodge-1.png" width="648"></p>
<p>Unlike the base <code><a href="https://ggplot2.tidyverse.org/reference/geom_dotplot.html">ggplot2::geom_dotplot()</a></code> geom, <code><a href="../reference/geom_dotsinterval.html">tidybayes::geom_dots()</a></code> automatically determines a bin width to ensure that the dot stacks fit within the available space. With so few dots here, the outlines mask the fill, so it makes sense to map the outline color of the dots as well:</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup, color = subgroup)) +
  stat_dots(position = "dodge") +
  labs(title = "stat_dots(slab_color = NA)")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dots_dodge_nocolor-1.png" width="648"></p>
</div>
<div id="quantile-dotplots" class="section level3">
<h3 class="hasAnchor">
<a href="#quantile-dotplots" class="anchor"></a>Quantile dotplots</h3>
<p>The above plots are a bit hard to read due to the large number of dots. Particularly when summarizing posterior distributions or predictive distributions, it can make sense to plot a smaller number of dots (say 20, 50 or 100) that are <em>representative</em> of the full sample. One such approach is to plot <em>quantiles</em>, thereby creating <em>quantile dotplots</em>, which can help people make decisions under uncertainty (<a href="https://doi.org/10.1145/2858036.2858558">Kay 2016</a>, <a href="https://doi.org/10.1145/3173574.3173718">Fernandes 2018</a>).</p>
<p>The <code>quantiles</code> argument to <code>stat_dots</code> constructs a quantile dotplot with the specified number of quantiles. Here is one with 50 quantiles, so each dot represents approximately a 2% (1/50) chance. We’ll turn off outline color too (<code>color = NA</code>):</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_dots(position = "dodge", quantiles = 50, color = NA) +
  labs(title = "stat_dots(quantiles = 50)")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/quantile_dots_dodge-1.png" width="648"></p>
</div>
<div id="on-analytical-distributions-stat_dist_dotsh" class="section level3">
<h3 class="hasAnchor">
<a href="#on-analytical-distributions-stat_dist_dotsh" class="anchor"></a>On analytical distributions: <code>stat_dist_dots[h]</code>
</h3>
<p>As with other plot types, you can also use <code><a href="../reference/geom_dotsinterval.html">stat_dist_dots()</a></code> instead if you wish to visualize analytical distributions. Analytical dotplots default to 100-dot quantile dotplots (as above, this can be adjusted with the <code>quantiles</code> argument). Shapes of the dots can also be changed using the <code>shape</code> aesthetic, and as with all slabinterval geoms, fill and color aesthetics can be varied within the geoms:</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r">dist_df %&gt;%
  ggplot(aes(x = group, dist = "norm", arg1 = mean, arg2 = sd, fill = stat(y &lt; 5), shape = subgroup)) +
  stat_dist_dots(position = "dodge", color = NA) +
  labs(title = "stat_dist_dots(aes(fill = stat(y &lt; 5), shape = subgroup))") +
  # we'll use these shapes since they retain outlines
  scale_shape_manual(values = c(21,22,23))</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dist_dots_shape_color-1.png" width="648"></p>
<p>As with other slabinterval geoms, the <code>side</code> argument can also be used to construct violin-style dotplots. This example also shows the use of <code>dotsinterval</code> in place of <code>dots</code> to construct a combined quantile dotplot violin + interval plot. We also set <code>slab_color = NA</code> to turn off the outline on the dots:</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r">dist_df %&gt;%
  ggplot(aes(x = group, dist = "norm", arg1 = mean, arg2 = sd, fill = subgroup)) +
  stat_dist_dotsinterval(position = "dodge", side = "both", slab_color = NA) +
  labs(title = "stat_dist_dotsinterval(side = 'both', slab_color = NA)") </pre></body></html></div>
<p><img src="slabinterval_files/figure-html/dist_dots_violin-1.png" width="648"></p>
</div>
<div id="summing-up-dotplots-stat_dist_dotsintervalh" class="section level3">
<h3 class="hasAnchor">
<a href="#summing-up-dotplots-stat_dist_dotsintervalh" class="anchor"></a>Summing up dotplots: <code>stat_[dist_]dots[interval][h]</code>
</h3>
<p>All of the above geoms follow the naming scheme <code>stat_[dist_]dots[interval][h]</code>.</p>
<ul>
<li>Add <code>dist_</code> to the name to get stats for analytical distributions (otherwise it is for sample data).</li>
<li>Add <code>interval</code> to the name to get the version with a point+interval geom overlaid.</li>
<li>Add <code>h</code> to the name to get the horizontal version.</li>
</ul>
</div>
</div>
<div id="custom-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-plots" class="anchor"></a>Custom plots</h2>
<p>The <code>slabinterval</code> family of stats and geoms is designed to be very flexible. Most of the shortcut geoms above can be created simply by setting particular combinations of options and aesthetic mappings using the basic <code><a href="../reference/geom_slabinterval.html">geom_slabinterval()</a></code>, <code><a href="../reference/stat_sample_slabinterval.html">stat_sample_slabinterval()</a></code>, and <code><a href="../reference/stat_dist_slabinterval.html">stat_dist_slabinterval()</a></code>. Some useful combinations do not have specific shortcut geoms currently, but can be created manually with only a bit of additional effort.</p>
<div id="gradients-of-alpha-color-and-fill" class="section level3">
<h3 class="hasAnchor">
<a href="#gradients-of-alpha-color-and-fill" class="anchor"></a>Gradients of alpha, color, and fill</h3>
<p>Two aesthetics of particular use for creating custom geoms are <code>slab_alpha</code>, which changes the alpha transparency of the slab portion of the geom, <code>slab_color</code>, which changes its outline color, and <code>fill</code>, which changes its fill color. All of these aesthetics can be mapped to variables along the length of the geom (that is, the color does not have to be constant over the entire geom), which allows you to create gradients or to highlight meaningful regions of the data (amongst other things).</p>
</div>
<div id="ccdf-gradients" class="section level3">
<h3 class="hasAnchor">
<a href="#ccdf-gradients" class="anchor"></a>CCDF Gradients</h3>
<p>For example, <code>stat_ccdfinterval</code> maps the output of the evaluated function (in its case, the CCDF) onto the <code>thickness</code> aesthetic of the <code>slabinterval</code> geom, which determines how thick the slab is. This is the equivalent of setting <code>aes(thickness = stat(f))</code>. However, we could instead create a CCDF gradient plot, a sort of mashup of a CCDF barplot and a density gradient plot, by mapping <code>stat(f)</code> onto the <code>slab_alpha</code> aesthetic instead, and setting <code>thickness</code> to a constant (1):</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r">df %&gt;%
  ggplot(aes(x = group, y = value, fill = subgroup)) +
  stat_ccdfinterval(aes(slab_alpha = stat(f)), thickness = 1, position = "dodge") +
  expand_limits(y = 0) +
  # plus coord_cartesian so there is no space between bars and axis
  coord_cartesian(expand = FALSE) +
  ggtitle("stat_ccdfinterval(aes(slab_alpha = stat(f)), thickness = 1)")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/ccdf_gradient-1.png" width="648"></p>
</div>
<div id="highlighting-and-other-combinations" class="section level3">
<h3 class="hasAnchor">
<a href="#highlighting-and-other-combinations" class="anchor"></a>Highlighting and other combinations</h3>
<p>The ability to map arbitrary variables onto fill or outline colors within a slab allows you to easily highlight sub-regions of a plot. Take the earlier example of visualizing priors:</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r">priors = tribble(
  ~ dist,      ~ args,
  "norm",      list(0, 1),
  "student_t", list(3, 0, 1)
) 

priors %&gt;%
  ggplot(aes(y = dist, dist = dist, args = args)) +
  stat_dist_halfeyeh() +
  ggtitle("stat_dist_halfeyeh()")</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/norm_vs_t_2-1.png" width="648"></p>
<p>We can add a mapping to the <code>fill</code> aesthetic to highlight a region of interest, say ±1.5:</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r">priors %&gt;%
  ggplot(aes(y = dist, dist = dist, args = args)) +
  stat_dist_halfeyeh(aes(fill = stat(abs(x) &lt; 1.5))) +
  ggtitle("stat_dist_halfeyeh(aes(fill = stat(abs(x) &lt; 1.5)))") +
  # we'll use a nicer palette than the default for highlighting:
  scale_fill_manual(values = c("gray85", "skyblue"))</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/norm_vs_t_highlight-1.png" width="648"></p>
<p>We could also combine these aesthetics arbitrarily. Here is a (probably not very useful) eye plot + gradient plot combination, with the portion of the distribution above 1 highlighted:</p>
<div class="sourceCode" id="cb39"><html><body><pre class="r">priors %&gt;%
  ggplot(aes(y = dist, dist = dist, args = args)) +
  stat_dist_eyeh(aes(alpha = stat(f), fill = stat(x &gt; 1))) +
  ggtitle("stat_dist_eyeh(aes(alpha = stat(f), fill = stat(x &gt; 1)))") +
  # we'll use a nicer palette than the default for highlighting:
  scale_fill_manual(values = c("gray75", "skyblue"))</pre></body></html></div>
<p><img src="slabinterval_files/figure-html/norm_vs_t_gradient_eye-1.png" width="648"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://www.mjskay.com">Matthew Kay</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
