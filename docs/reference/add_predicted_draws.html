<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add draws from (possibly transformed) posterior linear predictors (the "fit") or from posterior predictions
of a model to a data frame — add_fitted_draws • tidybayes</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Add draws from (possibly transformed) posterior linear predictors (the "fit") or from posterior predictions
of a model to a data frame — add_fitted_draws" />

<meta property="og:description" content="Given a data frame and a model, adds draws from the posterior &quot;fit&quot; (aka the linear/link-level predictor)
or from the posterior predictions of the model to the data frame in a long format." />

<meta property="og:image" content="http://mjskay.github.io/tidybayes/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93322-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93322-5');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidybayes</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tidybayes.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tidy-brms.html">Extracting and visualizing tidy draws from brms models</a>
    </li>
    <li>
      <a href="../articles/tidy-rstanarm.html">Extracting and visualizing tidy draws from rstanarm models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mjskay/tidybayes">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add draws from (possibly transformed) posterior linear predictors (the "fit") or from posterior predictions
of a model to a data frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/mjskay/tidybayes/blob/master/R/fitted_draws.R'><code>R/fitted_draws.R</code></a>, <a href='https://github.com/mjskay/tidybayes/blob/master/R/predicted_draws.R'><code>R/predicted_draws.R</code></a></small>
    <div class="hidden name"><code>add_predicted_draws.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Given a data frame and a model, adds draws from the posterior "fit" (aka the linear/link-level predictor)
or from the posterior predictions of the model to the data frame in a long format.</p>
    
    </div>

    <pre class="usage"><span class='fu'>add_fitted_draws</span>(<span class='no'>newdata</span>, <span class='no'>model</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>".value"</span>, <span class='no'>...</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>".category"</span>,
  <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"linear"</span>))

<span class='fu'>fitted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>".value"</span>, <span class='no'>...</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>".category"</span>,
  <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"linear"</span>))

<span class='co'># S3 method for default</span>
<span class='fu'>fitted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='no'>...</span>)

<span class='co'># S3 method for stanreg</span>
<span class='fu'>fitted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>".value"</span>, <span class='no'>...</span>,
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>".category"</span>,
  <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"linear"</span>))

<span class='co'># S3 method for brmsfit</span>
<span class='fu'>fitted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>".value"</span>, <span class='no'>...</span>,
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>".category"</span>,
  <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"linear"</span>))

<span class='fu'>add_linpred_draws</span>(<span class='no'>newdata</span>, <span class='no'>model</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>".value"</span>, <span class='no'>...</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>".category"</span>,
  <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"linear"</span>))

<span class='fu'>linpred_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>".value"</span>, <span class='no'>...</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>category</span> <span class='kw'>=</span> <span class='st'>".category"</span>,
  <span class='kw'>dpar</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"response"</span>, <span class='st'>"linear"</span>))

<span class='fu'>add_predicted_draws</span>(<span class='no'>newdata</span>, <span class='no'>model</span>, <span class='kw'>prediction</span> <span class='kw'>=</span> <span class='st'>".prediction"</span>, <span class='no'>...</span>,
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>predicted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='kw'>prediction</span> <span class='kw'>=</span> <span class='st'>".prediction"</span>, <span class='no'>...</span>,
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>predicted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>, <span class='no'>...</span>)

<span class='co'># S3 method for stanreg</span>
<span class='fu'>predicted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>,
  <span class='kw'>prediction</span> <span class='kw'>=</span> <span class='st'>".prediction"</span>, <span class='no'>...</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='co'># S3 method for brmsfit</span>
<span class='fu'>predicted_draws</span>(<span class='no'>model</span>, <span class='no'>newdata</span>,
  <span class='kw'>prediction</span> <span class='kw'>=</span> <span class='st'>".prediction"</span>, <span class='no'>...</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>newdata</th>
      <td><p>Data frame to generate predictions from. If omitted, most model types will
generate predictions from the data used to fit the model.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>A supported Bayesian model fit that can provide fits and predictions. Supported models
are listed in the second section of <a href='tidybayes-models.html'>tidybayes-models</a>: <em>Models Supporting Prediction</em>. While other
functions in this package (like <code><a href='spread_draws.html'>spread_draws</a></code>) support a wider range of models, to work with
<code>add_fitted_draws</code> and <code>add_predicted_draws</code> a model must provide an interface for generating
predictions, thus more generic Bayesian modeling interfaces like <code>runjags</code> and <code>rstan</code> are not directly
supported for these functions (only wrappers around those languages that provide predictions, like <code>rstanarm</code>
and <code>brm</code>, are supported here).</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>The name of the output column for <code>fitted_draws</code>; default <code>".value"</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to the underlying prediction method for the type of
model given.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>The number of draws per prediction / fit to return, or <code>NULL</code> to return all draws.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>A seed to use when subsampling draws (i.e. when <code>n</code> is not <code>NULL</code>).</p></td>
    </tr>
    <tr>
      <th>re_formula</th>
      <td><p>formula containing group-level effects to be considered in the prediction.
If <code>NULL</code> (default), include all group-level effects; if <code>NA</code>, include no group-level effects.
Some model types (such as <code><a href='http://www.rdocumentation.org/packages/brms/topics/brm'>brm</a></code> and <code><a href='http://www.rdocumentation.org/packages/rstanarm/topics/stanreg-objects'>stanreg-objects</a></code>) allow
marginalizing over grouping factors by specifying new levels of a factor in <code>newdata</code>. In the case of
<code><a href='http://www.rdocumentation.org/packages/brms/topics/brm'>brm</a></code>, you must also pass <code>allow_new_levels = TRUE</code> here to include new levels (see
<code><a href='http://www.rdocumentation.org/packages/brms/topics/predict.brmsfit'>predict.brmsfit</a></code>).</p></td>
    </tr>
    <tr>
      <th>category</th>
      <td><p>For <em>some</em> ordinal and multinomial models (notably, <code><a href='http://www.rdocumentation.org/packages/brms/topics/brm'>brm</a></code> models but
<em>not</em> <code><a href='http://www.rdocumentation.org/packages/rstanarm/topics/stan_polr'>stan_polr</a></code> models), multiple sets of rows will be returned per input row for
<code>fitted_draws</code>, one for each category. The <code>category</code> argument specifies the name of the column
to put the category names into in the resulting data frame (default: <code>".category"</code>). The fact that multiple
rows per response are returned only for some model types reflects the fact that tidybayes takes the approach of
tidying whatever output is given to us, and the output from different modeling functions differ on this point.
See <code><a href='../articles/tidy-brms.html'>vignette("tidy-brms")</a></code> and <code><a href='../articles/tidy-rstanarm.html'>vignette("tidy-rstanarm")</a></code> for examples of dealing with output
from ordinal models using both approaches.</p></td>
    </tr>
    <tr>
      <th>dpar</th>
      <td><p>For <code>fitted_draws</code> and <code>add_fitted_draws</code>: Should distributional regression
parameters be included in the output? Valid only for models that support distributional regression parameters,
such as submodels for variance parameters (as in <code>brm</code>). If <code>TRUE</code>, distributional regression
parameters are included in the output as additional columns named after each parameter
(alternative names can be provided using a list or named vector, e.g. <code>c(sigma.hat = "sigma")</code>
would output the <code>"sigma"</code> parameter from a model as a column named <code>"sigma.hat"</code>).
If <code>FALSE</code> (the default), distributional regression parameters are not included.</p></td>
    </tr>
    <tr>
      <th>scale</th>
      <td><p>Either <code>"response"</code> or <code>"linear"</code>. If <code>"response"</code>, results are returned
on the scale of the response variable. If <code>"linear"</code>, fitted values are returned on the scale of
the linear predictor.</p></td>
    </tr>
    <tr>
      <th>prediction</th>
      <td><p>The name of the output column for <code>predicted_draws</code>; default <code>".prediction"</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame (actually, a <code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>) with a <code>.row</code> column (a
factor grouping rows from the input <code>newdata</code>), <code>.chain</code> column (the chain
each draw came from, or <code>NA</code> if the model does not provide chain information),
<code>.iteration</code> column (the iteration the draw came from, or <code>NA</code> if the model does
not provide iteration information), and a <code>.draw</code> column (a unique index corresponding to each draw
from the distribution). In addition, <code>fitted_draws</code> includes a column with its name specified by
the <code>value</code> argument (default is <code>.value</code>) containing draws from the (transformed) linear predictor,
and <code>predicted_draws</code> contains a <code>.prediction</code> column containing draws from the posterior predictive
distribution. For convenience, the resulting data frame comes grouped by the original input rows.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>add_fitted_draws</code> adds draws from (possibly transformed) posterior linear predictors (or "link-level" predictors) to
the data. It corresponds to <code><a href='http://www.rdocumentation.org/packages/rstanarm/topics/posterior_linpred.stanreg'>posterior_linpred</a></code> in <code>rstanarm</code> or
<code><a href='http://www.rdocumentation.org/packages/brms/topics/fitted.brmsfit'>fitted.brmsfit</a></code> in <code>brms</code>.</p>
<p><code>add_predicted_draws</code> adds draws from posterior predictions to
the data. It corresponds to <code><a href='http://www.rdocumentation.org/packages/rstanarm/topics/posterior_predict.stanreg'>posterior_predict</a></code> in <code>rstanarm</code> or
<code><a href='http://www.rdocumentation.org/packages/brms/topics/predict.brmsfit'>predict.brmsfit</a></code> in <code>brms</code>.</p>
<p><code>add_fitted_draws</code> and <code>fitted_draws</code> are alternate spellings of the
same function with opposite order of the first two arguments to facilitate use in data
processing pipelines that start either with a data frame or a model. Similarly,
<code>add_predicted_draws</code> and <code>predicted_draws</code> are alternate spellings.</p>
<p>Given equal choice between the two, <code>add_fitted_draws</code> and <code>add_predicted_draws</code>
are the preferred spellings.</p>
<p><code>add_linpred_draws</code> and <code>linpred_draws</code> are alternative spellings of <code>fitted_draws</code>
and <code>add_fitted_draws</code> for consistency with <code>rstanarm</code> terminology (specifically
<code><a href='http://www.rdocumentation.org/packages/rstanarm/topics/posterior_linpred.stanreg'>posterior_linpred</a></code>).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='spread_draws.html'>spread_draws</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='fu'>library</span>(<span class='no'>dplyr</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'dplyr'</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from 'package:testthat':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    matches</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:stats':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from 'package:base':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'>
<span class='kw'>if</span> (
  <span class='fu'>require</span>(<span class='st'>"rstanarm"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='kw'>&amp;&amp;</span>
  <span class='fu'>require</span>(<span class='st'>"modelr"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
) {

  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/theme_get'>theme_set</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_light</a></span>())

  <span class='no'>m_mpg</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/rstanarm/topics/stan_glm'>stan_glm</a></span>(<span class='no'>mpg</span> ~ <span class='no'>hp</span> * <span class='no'>cyl</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>,
    <span class='co'># 1 chain / few iterations just so example runs quickly</span>
    <span class='co'># do not use in practice</span>
    <span class='kw'>chains</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>iter</span> <span class='kw'>=</span> <span class='fl'>500</span>)

  <span class='co'># draw 100 fit lines from the posterior and overplot them</span>
  <span class='no'>mtcars</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>cyl</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/modelr/topics/data_grid'>data_grid</a></span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/modelr/topics/seq_range'>seq_range</a></span>(<span class='no'>hp</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>101</span>)) <span class='kw'>%&gt;%</span>
    <span class='fu'>add_fitted_draws</span>(<span class='no'>m_mpg</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>hp</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>mpg</span>, <span class='kw'>color</span> <span class='kw'>=</span> <span class='fu'>ordered</span>(<span class='no'>cyl</span>))) +
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>.value</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='fu'>paste</span>(<span class='no'>cyl</span>, <span class='no'>.draw</span>)), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.25</span>) +
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>)

  <span class='co'># plot posterior predictive intervals</span>
  <span class='no'>mtcars</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>cyl</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/modelr/topics/data_grid'>data_grid</a></span>(<span class='kw'>hp</span> <span class='kw'>=</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/modelr/topics/seq_range'>seq_range</a></span>(<span class='no'>hp</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>101</span>)) <span class='kw'>%&gt;%</span>
    <span class='fu'>add_predicted_draws</span>(<span class='no'>m_mpg</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>hp</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>mpg</span>, <span class='kw'>color</span> <span class='kw'>=</span> <span class='fu'>ordered</span>(<span class='no'>cyl</span>))) +
    <span class='fu'><a href='stat_lineribbon.html'>stat_lineribbon</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>.prediction</span>), <span class='kw'>.width</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>.99</span>, <span class='fl'>.95</span>, <span class='fl'>.8</span>, <span class='fl'>.5</span>), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.25</span>) +
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>mtcars</span>) +
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/scale_brewer'>scale_fill_brewer</a></span>(<span class='kw'>palette</span> <span class='kw'>=</span> <span class='st'>"Greys"</span>)
}</div><div class='output co'>#&gt; <span class='message'>rstanarm (Version 2.17.4, packaged: 2018-04-13 01:51:52 UTC)</span></div><div class='output co'>#&gt; <span class='message'>- Do not expect the default priors to remain the same in future rstanarm versions.</span></div><div class='output co'>#&gt; <span class='message'>Thus, R scripts should specify priors explicitly, even if they are just the defaults.</span></div><div class='output co'>#&gt; <span class='message'>- For execution on a local, multicore CPU with excess RAM we recommend calling</span></div><div class='output co'>#&gt; <span class='message'>options(mc.cores = parallel::detectCores())</span></div><div class='output co'>#&gt; <span class='message'>- Plotting theme set to bayesplot::theme_default().</span></div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'continuous' NOW (CHAIN 1).
#&gt; 
#&gt; Gradient evaluation took 0 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 0 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:   1 / 500 [  0%]  (Warmup)
#&gt; Iteration:  50 / 500 [ 10%]  (Warmup)
#&gt; Iteration: 100 / 500 [ 20%]  (Warmup)
#&gt; Iteration: 150 / 500 [ 30%]  (Warmup)
#&gt; Iteration: 200 / 500 [ 40%]  (Warmup)
#&gt; Iteration: 250 / 500 [ 50%]  (Warmup)
#&gt; Iteration: 251 / 500 [ 50%]  (Sampling)
#&gt; Iteration: 300 / 500 [ 60%]  (Sampling)
#&gt; Iteration: 350 / 500 [ 70%]  (Sampling)
#&gt; Iteration: 400 / 500 [ 80%]  (Sampling)
#&gt; Iteration: 450 / 500 [ 90%]  (Sampling)
#&gt; Iteration: 500 / 500 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 0.081 seconds (Warm-up)
#&gt;                0.068 seconds (Sampling)
#&gt;                0.149 seconds (Total)
#&gt; </div><div class='img'><img src='add_predicted_draws-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Matthew Kay

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://www.mjskay.com'>Matthew Kay</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

